html
  head
    title= recipe.title
    link(href="https://fonts.googleapis.com/css?family=Noto+Serif|Noto+Sans", rel="stylesheet")
    style(type='text/css').
      body {
        margin: 0.635cm;
        margin-right: calc(50% + 0.635cm);
        font-family: 'Noto+Serif', serif;
        font-size: 12px;
      }

      .header {
        font-size: 20px;
        margin-bottom: 10px;
        margin-top: 0;
      }

      .sans {
        font-family: 'Noto+Sans', sans-serif;
      }

      @media print {
        body {margin: 0.635cm; margin-right: calc(50% + 0.635cm)}
        @page {margin: 0; size: landscape;}
      }

      .ingredients {
        margin-top: 7px;
        margin-left: 40px;
        margin-bottom: 7px;
      }

      .ingredient {
        font-weight: bold;
        padding: 0;
        margin: 0;
        margin-top: 0px;
      }

      .instruction {
        margin-top: 0;
        vertical-align: top;
      }

      .instruction .count {
        font-weight: bold;
        width: 10px;
      }

      .instruction .text {
        padding-bottom: 2px;
      }

      .meta {
        border-top: 1px solid grey;
        border-bottom: 1px solid grey;
        padding: 0px;
        display: flex;
        flex-wrap: wrap;
      }

      .meta > div {
        flex: 0 0 auto;
        padding: 5px;
      }

      .image {
        width: 200px;
        height: 200px;
        object-fit: cover;
        object-position: center;
      }

      table {
        width: 100%;
        font-size: 12px;
      }

      .prewrap {
        white-space: pre-wrap;
      }

      .leftCol {
        width: 200px;
        padding-right: 20px;
      }
  body
    h1(class='sans header')= recipe.title
    if recipe.source || recipe.activeTime || recipe.totalTime || recipe.yield
      div(class='meta')
        if recipe.source
          div
            b(class='sans') Source:&nbsp;&nbsp;
            span= recipe.source
        if recipe.activeTime
          div
            b(class='sans') Active Time:&nbsp;&nbsp;
            span= recipe.activeTime
        if recipe.totalTime
          div
            b(class='sans') Total Time:&nbsp;&nbsp;
            span= recipe.totalTime
        if recipe.yield
          div
            b(class='sans') Yield:&nbsp;&nbsp;
            span= recipe.yield
    p= recipe.description
    if recipe.labels
      -var labelIdx = 0
      each label in recipe.labels
        i= label.title
        if ++labelIdx < recipe.labels.length
          i ,&nbsp;

    if recipe.ingredients
      div(class='ingredients sans')
        each ingredient in recipe.ingredients
          p(class='ingredient')= ingredient
    if recipe.instructions
      table
        tbody
          -var instructionIdx = 0
          each instruction in recipe.instructions
            tr(class='instruction')
              td(class='count')
                span(class='')= ++instructionIdx
              td(class='text')
                span= instruction

    if recipe.notes
      p(class='sans')
        b Notes:
      p(class='prewrap')= recipe.notes

    if recipe.url
      b(class='sans') Source URL:
      span= ' ' + recipe.url

    p
      i Printed on&nbsp;
      i= date

  script(type='text/javascript').
    if (window.location.href.indexOf('print=true') > -1) {
      window.print();
      window.onafterprint = window.close;
    }

    window.addEventListener('message', function(e) {
      window.print();
    });
