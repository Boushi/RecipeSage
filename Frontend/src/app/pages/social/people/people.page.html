<ion-header>
  <ion-toolbar color="nav">
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>

    <ion-title>People</ion-title>

    <ion-buttons slot="end">
      <ion-button (click)="editProfile()">
        <ion-icon slot="start" name="contact"></ion-icon>
        My Profile
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <null-state *ngIf="!accountInfo?.enableProfile">
    <ion-icon name="contact" class="big-icon" virtualSlot="header"></ion-icon>
    <ion-label virtualSlot="body">
      <p>
        You haven't set up a profile.
        <br /> Creating a profile allows you to share collections of recipes with friends and the public.
        <br />
        <br />
        <ion-button (click)="editProfile()">
          <ion-icon slot="start" name="add"></ion-icon>
          Create
        </ion-button>
      </p>
    </ion-label>
  </null-state>

  <br />

  <ion-item-divider *ngIf="accountInfo?.enableProfile">
    <ion-label>
      Friends &amp; Invites
    </ion-label>
  </ion-item-divider>
  <ion-list *ngIf="accountInfo?.enableProfile">
    <ion-list-header *ngIf="friendships?.incomingRequests?.length > 0">
      Friend invites
    </ion-list-header>
    <ion-item *ngFor="let friendship of friendships?.incomingRequests" button (click)="openProfile(friendship.otherUser.id)">
      <ion-label>{{friendship.otherUser.name}}</ion-label>
      <ion-button slot="end" (click)="addFriend(friendship.friendId)">Accept</ion-button>
      <ion-button slot="end" color="danger">Decline</ion-button>
    </ion-item>
    <ion-list-header *ngIf="friendships?.outgoingRequests?.length > 0">
      Pending friend requests
    </ion-list-header>
    <ion-item *ngFor="let friendship of friendships?.outgoingRequests" button (click)="openProfile(friendship.otherUser.id)">
      <ion-label>{{friendship.otherUser.name}}</ion-label>
      <ion-button slot="end" color="danger">Cancel</ion-button>
    </ion-item>
    <ion-list-header *ngIf="friendships?.friends?.length > 0">
      Friends
    </ion-list-header>
    <ion-item *ngFor="let friendship of friendships?.friends" button (click)="openProfile(friendship.otherUser.id)">
      <ion-label>{{friendship.otherUser.name}}</ion-label>
      <ion-button slot="end" color="danger">Unfriend</ion-button>
    </ion-item>

    <null-state *ngIf="friendships?.incomingRequests?.length == 0 && friendships?.outgoingRequests?.length == 0 && friendships?.friends?.length == 0">
      <ion-icon name="people" class="big-icon" virtualSlot="header"></ion-icon>
      <ion-label virtualSlot="body">
        <p>
          You don't have any friends added.
          <br /> Adding someone as a friend allows you to collaborate on recipes, meal plans, and shopping lists.
          <br /> To add someone, click the search icon.
        </p>
      </ion-label>
    </null-state>
  </ion-list>

  <ion-fab vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button (click)="findProfile()" color="primary">
      <ion-icon name="search"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-content>
